[smart_terrains]
none = true

[logic]
active = {-agent_skazal} walker@1, {+agent_skazal -zhorik_start} walker@11, {+zhorik_start -agent_mk_mesto} walker@2, {+agent_mk_mesto -brown_start_dialog_mesto} walker@3, {+brown_start_dialog_mesto -zhorik_dead} walker@4, {+zhorik_dead} walker@5     
danger = danger_condition
combat_ignore = combat_ignore
on_hit = hit
on_death = death

[hit]
on_info = %+agent_mk_vrag%

[death]
on_info = %+agent_mk_dead +agent_mk_vrag%
on_info2 = {=killed_by_actor} %+agent_mk_vrag%

[walker@vrag1]
path_walk = agent_mk_walk
path_look = agent_mk_look
meet = no_meet
danger = danger_condition

[walker@vrag2]
path_walk = agent_mk1_walk
path_look = agent_mk1_look
meet = no_meet
danger = danger_condition

[walker@vrag3]
path_walk = agent_mk2_walk
path_look = agent_mk2_look
meet = no_meet
danger = danger_condition
on_signal = agent2 | %+del_agent_mk +agent_mk_proval =play_snd(ambient\new\actor_30_1)%

[walker@1]
path_walk = agent_mk_walk
path_look = agent_mk_look
meet = no_meet
danger = danger_condition
def_state_standing = ward
combat_ignore_cond = always
on_info = {+agent_govorit} remark@1
on_info2 = {+agent_mk_vrag} walker@vrag1 %+agent_mk_proval =play_snd(ambient\new\actor_29)%
on_actor_dist_le_nvis = 20 | %+agent_mk_vrag +agent_mk_proval =play_snd(ambient\new\actor_29)%

[remark@1]
anim = ward
target = 30342
snd = agent1
meet = no_meet
combat_ignore_cond = always
danger = danger_condition
on_signal = sound_end | walker@11 %+agent_skazal%
on_info = {+agent_mk_vrag} walker@vrag1 %+agent_mk_proval =play_snd(ambient\new\actor_29)%
on_actor_dist_le_nvis = 20 | %+agent_mk_vrag +agent_mk_proval =play_snd(ambient\new\actor_29)%

[walker@11]
path_walk = agent_mk_walk
path_look = agent_mk_look
meet = no_meet
danger = danger_condition
def_state_standing = ward
combat_ignore_cond = always
on_info = {+zhorik_start} walker@111
on_info2 = {+agent_mk_vrag} walker@vrag1 %+agent_mk_proval =play_snd(ambient\new\actor_29)%
on_actor_dist_le_nvis = 20 | %+agent_mk_vrag +agent_mk_proval =play_snd(ambient\new\actor_29)%

[walker@111]
path_walk = agent_mk_walk
path_look = agent_mk_look
meet = no_meet
danger = danger_condition
def_state_standing = ward
combat_ignore_cond = always
on_timer = 4000 | walker@2
on_info = {+agent_mk_vrag} walker@vrag1 %+agent_mk_proval =play_snd(ambient\new\actor_29_1)%
on_actor_dist_le_nvis = 20 | %+agent_mk_vrag +agent_mk_proval =play_snd(ambient\new\actor_29_1)%

[walker@2]
path_walk = agent_mk1_walk
path_look = agent_mk1_look
meet = no_meet
def_state_moving1 = run
def_state_moving2 = run
def_state_moving3 = run
danger = danger_condition
combat_ignore_cond = always
on_signal = agent1 | walker@3
on_info = {+agent_mk_vrag} walker@vrag2 %+agent_mk_proval =play_snd(ambient\new\actor_29_1)%
on_actor_dist_le_nvis = 25 | %+agent_mk_vrag +agent_mk_proval =play_snd(ambient\new\actor_29_1)%

[walker@3]
path_walk = agent_mk1_walk
path_look = agent_mk1_look
meet = no_meet
danger = danger_condition
def_state_standing = ward
combat_ignore_cond = always
on_info = {+agent_mk_mesto} remark@2
on_info2 = {+agent_mk_vrag} walker@vrag2 %+agent_mk_proval =play_snd(ambient\new\actor_30)%
on_actor_dist_le_nvis = 20 | %+agent_mk_vrag +agent_mk_proval =play_snd(ambient\new\actor_30)%

[remark@2]
anim = ward
target = 30342
snd = agent2
meet = no_meet
combat_ignore_cond = always
danger = danger_condition
on_signal = sound_end | walker@4 %+brown_start_dialog_mesto%
on_info = {+agent_mk_vrag} walker@vrag2 %+agent_mk_proval =play_snd(ambient\new\actor_30)%
on_actor_dist_le_nvis = 20 | %+agent_mk_vrag +agent_mk_proval =play_snd(ambient\new\actor_30)%

[walker@4]
path_walk = agent_mk1_walk
path_look = agent_mk1_look
meet = no_meet
;combat_ignore_cond = {=fighting_actor}
danger = danger_condition
on_info = {+zhorik_dead} walker@5 %+ostalnye_poshli%
on_info2 = {+agent_mk_vrag} walker@vrag3

[walker@5]
path_walk = agent_mk2_walk
path_look = agent_mk2_look
meet = no_meet
danger = danger_condition
on_info = {+agent_mk_vrag} walker@vrag3
on_signal = agent2 | %+del_agent_mk +agent_mk_proval =play_snd(ambient\new\actor_30_1)%

[danger_condition]
ignore_distance = 20
ignore_distance_corpse = 0

[meet]
use = true
use_wpn = false
meet_talk_enabled = true